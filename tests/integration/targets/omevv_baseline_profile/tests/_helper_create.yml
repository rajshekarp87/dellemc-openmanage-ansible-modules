---
- block:
    - name: Create firmware repository profile
      dellemc.openmanage.omevv_firmware_repository_profile:
        name: "OMAM_Firm_Repo"
        description: "Firmware repository profile created by OMAM"
        state: present
        catalog_path: "{{ http_share_dir_path }}/omevv_baseline_profile_catalog.xml"
        protocol_type: HTTP
      register: firm_repo

    - name: Assertion for creating firmware repository profile - Normal Mode
      ansible.builtin.assert:
        that:
          - firm_repo.changed is true
          - firm_repo.msg == "Successfully created the OMEVV firmware repository
            profile."
          - firm_repo.profile_info.status == "Success"

  module_defaults:
    dellemc.openmanage.omevv_firmware_repository_profile:
      validate_certs: "{{ validate_certs }}"
      hostname: "{{ hostname | ansible.utils.ipwrap }}"
      vcenter_username: "{{ vcenter_username }}"
      vcenter_password: "{{ vcenter_password }}"
      vcenter_uuid: "{{ uuid }}"
